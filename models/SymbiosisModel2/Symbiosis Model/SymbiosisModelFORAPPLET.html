<html>
<head>
<title>SymbiosisModelFOR APPLET</title>
<style type="text/css">
<!--
/*
    This style sheet is borrowed from the NetLogo User Manual.  However, some of the units were
    changed from em to px because Java's StyleSheet support is limited for relative units such as
    em and % (this will supposively improve with newer versions of the VM) - jrn 7/21/05
    BE VERY VERY CAREFUL when you alter this style sheet -- it's possible to put in
    innocent-looking things that work on some VM's but cause Java exceptions on other for example
    we were using "font-size: 125%" but it caused Java exceptions on Java 1.5 on Windows - ST
    8/25/05
*/
:link { color: rgb(110,0,110); }
:visited { color: rgb(110,0,110); }
body {
    margin-left: 5px;
    font-family: arial, sans-serif;
    background: white;
    font-size: 12pt
}
h1 {
    color: white;
    background: rgb(45,0,45);
    font-size: 18pt;
    margin-bottom: 4px;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h2 {
    margin-top: 15px;
    margin-left: 6px;
    margin-bottom: 4px;
    background: rgb(166,172,255);
    font-size: 15pt;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h3 {
    margin-top: 15px;
    margin-left: 13px;
    margin-bottom: 4px;
    background: rgb(175,175,175);
    font-size: 12pt;
    padding: 0.2em;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    margin-left: 15px;
    font-size: 12pt;
}
h5 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
h6 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
p {
    margin-left: 15px;
    margin-bottom: 3px;
}
pre {
    margin-left: 13px;
    background: rgb(225,225,225);
    font-family: monospace;
    font-size: 12pt;
    padding-left: 10px;
    padding-right: 3px;
    padding-top: 7px;
    padding-bottom: 7px;
    margin-top:9px;
    margin-bottom:0px;
}
code {
    font-family: monospace;
    font-size: 12pt;
}
blockquote {
    border: solid;
    border-style: solid;
    border-width: thin;
    border-color: black;
    background: rgb(250,250,220);
    padding-top: 0px;
    padding-bottom: 7px;
    margin-top: 7px;
    margin-bottom:1px;
}
ol {
   margin-bottom:1px;
}
ul {
   margin-bottom:1px;
}

-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 5.0.5.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://www.java.com/">Oracle's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(SymbiosisModelFOR APPLET.nlogo), and the files NetLogoLite.jar and NetLogoLite.jar.pack.gz
must all be in the same directory.  (You can copy NetLogoLite.jar and NetLogoLite.jar.pack.gz
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">The applet will also need access to the 
gis and nw extensions.
Copy the entire directory for each required extension into the same
directory as the applet.</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If the NetLogoLite files and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put
a single copy of the NetLogoLite files in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar,gis/gis.jar,gis/jai_codec-1.1.3.jar,gis/jai_core-1.1.3.jar,gis/ngunits-1.0.jar,gis/jts-1.9.jar,gis/commons-codec-1.3.jar,gis/commons-logging-1.1.jar,gis/commons-httpclient-3.0.1.jar,nw/nw.jar,nw/collections-generic-4.01.jar,nw/colt-1.2.0.jar,nw/concurrent-1.3.4.jar,nw/jgrapht-jdk1.6-0.8.3.jar,nw/jung-algorithms-2.0.2-nlfork-0.1.jar,nw/jung-api-2.0.1.jar,nw/jung-graph-impl-2.0.1.jar,nw/jung-io-2.0.1.jar,nw/stax-api-1.0.1.jar,nw/wstx-asl-3.2.6.jar"
        width="1311" height="512">
  <param name="DefaultModel"
         value="SymbiosisModelFOR%20APPLET.nlogo">
  <param name="java_arguments"
         value="-Djnlp.packEnabled=true">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="SymbiosisModelFOR%20APPLET.nlogo">SymbiosisModelFOR APPLET.nlogo</a></p>
<h2>WHAT IS IT?</h2><p>(a general understanding of what the model is trying to show or explain)</p><h2>HOW IT WORKS</h2><p>(what rules the agents use to create the overall behavior of the model)</p><h2>HOW TO USE IT</h2><p>(how to use the model, including a description of each of the items in the Interface tab)</p><h2>THINGS TO NOTICE</h2><p>(suggested things for the user to notice while running the model)</p><h2>THINGS TO TRY</h2><p>(suggested things for the user to try to do (move sliders, switches, etc.) with the model)</p><h2>EXTENDING THE MODEL</h2><p>(suggested things to add or change in the Code tab to make the model more complicated, detailed, accurate, etc.)</p><h2>NETLOGO FEATURES</h2><p>(interesting or unusual features of NetLogo that the model uses, particularly in the Code tab; or where workarounds were needed for missing features)</p><h2>RELATED MODELS</h2><p>(models in the NetLogo Models Library and elsewhere which are of related interest)</p><h2>CREDITS AND REFERENCES</h2><p>(a reference to the model&rsquo;s URL on the web if it has one, as well as any other necessary credits, citations, and links)</p>

<h1>CODE</h1>
<pre><font color="#000000">  
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;Agent-Based Modelling Scenarios for the Development of Regional Industrial Symbiosis</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;Demonstrate the potential of an Industrial symbiosis initiative around</font><font color="#000000">
</font><font color="#5a5a5a">;;;the sugar/wheat agricultural production in the Champagne Region (France).</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;Copyright 2013 by Najet BICHRAOUI. All rights reserved. </font><font color="#000000">
</font><font color="#5a5a5a">;;;No part of this model may be reproduced or transmitted in any form or</font><font color="#000000">
</font><font color="#5a5a5a">;;;by any means, electronic, photocopying, recording, or otherwise, without</font><font color="#000000">
</font><font color="#5a5a5a">;;;prior written permission of the author.</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">


</font><font color="#007f69">extensions</font><font color="#000000"> [ gis nw ]
</font><font color="#5a5a5a">;extensions [nw]</font><font color="#000000">

</font><font color="#007f69">globals</font><font color="#000000">  [nodes-gis InL OutL one-partner exchange partnered non-partnered factories flows_qty  nn partner-pioneer land_use symbiosis_plants_data parcels_data parcels_datatopo
          roads_data WTplants_data perimeter-dataset polyline linkwith-n2
          nodes_list paths_list exchanges-pioneer exchanges-follower partner co2_pertonne_mile mydistance_km 
          Comingto
          ComningFrom
          ]

</font><font color="#660096">breed</font><font color="#000000"> [plants plant]
</font><font color="#660096">breed</font><font color="#000000"> [nodes node]
</font><font color="#660096">breed</font><font color="#000000"> [trucks truck]

</font><font color="#007f69">undirected-link-breed</font><font color="#000000"> [paths path]
</font><font color="#007f69">undirected-link-breed</font><font color="#000000"> [roads road]
</font><font color="#007f69">paths-own</font><font color="#000000"> [fid center dist iti]

</font><font color="#007f69">directed-link-breed</font><font color="#000000"> [partnerships partnership]
</font><font color="#007f69">partnerships-own</font><font color="#000000"> [
ownerFrom ownerTo
ownerFromTurt ownerToTurt
  In out 
  resource_type resource_capacity
  new-partner? route-list route-node-list mydistance dist 

   ]


</font><font color="#007f69">trucks-own</font><font color="#000000"> [ 
  move-list move-list2 move-index done? total_length
  to-node cur-link speed behaviour orginWho origin destinName destination
  drive routes OriLocation itinerary distances ]

</font><font color="#007f69">nodes-own</font><font color="#000000"> [id end? start? behaviour]

</font><font color="#007f69">plants-own</font><font color="#000000"> [ 
  Object_id name  plocation Industry_type trust doubt behaviour cooperation involvment
  my_potential_partners
  my_current_partner
  my_partner
  my_partnerName

  
  myresource_capacity
  plant_type Type_Capacity
  mat_received
  mat_qty_received
  mat_received_from
  mat_received_fromName
  mat_sent
  mat_qty_sent
  mat_sent_to
  mat_sent_toName
  Incount outcount Input_list Output_list Input_capacity_list Output_capacity_list Normalized_Input_list_capacity Normalized_Output_list_capacity
  out_partners_memory
  in_partners_memory
  Totalflows Input_with_qty Ouput_with_qty
  GHG_partnered GHG_nonpartnered behaviour0_tax behaviour1_tax
  MMT_Co2
  mydist_from
  mydist_to]

</font><font color="#007f69">patches-own</font><font color="#000000"> [Total_GHGemissions GHGemissions GHG_pioneer GHG_follower ]


</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;; ---------- startup/setup/go ----------</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> startup
  read-gis-datasets
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> read-gis-datasets
  </font><font color="#0000aa">set</font><font color="#000000"> symbiosis_plants_data  </font><font color="#660096">gis:load-dataset</font><font color="#000000"> </font><font color="#963700">&quot;data/List_plants_symb_topoVF_V1.shp&quot;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> perimeter-dataset      </font><font color="#660096">gis:load-dataset</font><font color="#000000"> </font><font color="#963700">&quot;data/departments_limites_TOPOVF.shp&quot;</font><font color="#000000">
 
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-world-envelope
  </font><font color="#0000aa">let</font><font color="#000000"> world (</font><font color="#660096">gis:envelope-of</font><font color="#000000"> perimeter-dataset) </font><font color="#5a5a5a">;; [ minimum-x maximum-x minimum-y maximum-y ]</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> zoom </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [
    </font><font color="#0000aa">let</font><font color="#000000"> x0 (</font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> world </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> world) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">          </font><font color="#0000aa">let</font><font color="#000000"> y0 (</font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> world </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> world) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> W0 zoom </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> world </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> world) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">   </font><font color="#0000aa">let</font><font color="#000000"> H0 zoom </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> world </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> world) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> world (</font><font color="#660096">list</font><font color="#000000"> (x0 </font><font color="#660096">-</font><font color="#000000"> W0) (x0 </font><font color="#660096">+</font><font color="#000000"> W0) (y0 </font><font color="#660096">-</font><font color="#000000"> H0) (y0 </font><font color="#660096">+</font><font color="#000000"> H0))
  ]
  </font><font color="#0000aa">gis:set-world-envelope</font><font color="#000000"> (world)
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup
  clear-all-but-globals
  </font><font color="#0000aa">import-world</font><font color="#000000"> </font><font color="#963700">&quot;data/WorldMarch20th world.csv&quot;</font><font color="#000000">
  read-gis-datasets
  setup-world-envelope
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> plants </font><font color="#963700">&quot;circle&quot;</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> trucks </font><font color="#963700">&quot;truck&quot;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> co2_pertonne_mile </font><font color="#963700">0.00010951</font><font color="#000000">      </font><font color="#5a5a5a">;= (0.0094 gal diesel/tonne mile) * (25,630 lbs TFC CO2 emissions/ 1000 gal) * (1 tonne / 2200 lbs)</font><font color="#000000">
  import-plants
  </font><font color="#0000aa">reset-ticks</font><font color="#000000">  
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#007f69">to</font><font color="#000000"> import-plants
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> 
  [
    </font><font color="#0000aa">set</font><font color="#000000"> GHGemissions [] 
  ]
  
  </font><font color="#0000aa">ask</font><font color="#000000"> plants [</font><font color="#0000aa">die</font><font color="#000000">]
  </font><font color="#0000aa">foreach</font><font color="#000000"> </font><font color="#660096">gis:feature-list-of</font><font color="#000000"> symbiosis_plants_data  
  [
    </font><font color="#0000aa">let</font><font color="#000000"> location </font><font color="#660096">gis:location-of</font><font color="#000000"> (</font><font color="#660096">first</font><font color="#000000"> (</font><font color="#660096">first</font><font color="#000000"> (</font><font color="#660096">gis:vertex-lists-of</font><font color="#000000"> ?)))  
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">empty?</font><font color="#000000"> location 
    [
      create-plants </font><font color="#963700">1</font><font color="#000000"> 
      [
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> location
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> location
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> name </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Name&quot;</font><font color="#000000"> 
        </font><font color="#0000aa">set</font><font color="#000000"> Object_id </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;OBJECTID&quot;</font><font color="#000000">
       
        </font><font color="#0000aa">set</font><font color="#000000"> trust </font><font color="#660096">random</font><font color="#000000">  </font><font color="#963700">5</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> doubt </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> (</font><font color="#963700">0.9</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000">)  </font><font color="#963700">4</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> involvment </font><font color="#660096">precision</font><font color="#000000"> (trust </font><font color="#660096">*</font><font color="#000000"> doubt)      </font><font color="#963700">4</font><font color="#000000">
        
        </font><font color="#0000aa">set</font><font color="#000000"> plocation </font><font color="#660096">min-one-of</font><font color="#000000"> nodes [</font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">]           
        </font><font color="#0000aa">set</font><font color="#000000"> Type_Capacity </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Type_C&quot;</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list []
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list []
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list []
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list []
        </font><font color="#0000aa">set</font><font color="#000000"> myresource_capacity []
        </font><font color="#0000aa">set</font><font color="#000000"> mat_received []
        </font><font color="#0000aa">set</font><font color="#000000"> mat_sent []
        </font><font color="#0000aa">set</font><font color="#000000"> flows_qty []
        
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input1&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input2&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input3&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input4&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input5&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input6&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input7&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input8&quot;</font><font color="#000000"> input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_list </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">&quot;&quot;</font><font color="#000000"> Input_list
        
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input1_c&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input2_c&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input3_c&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input4_c&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input5_c&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input6_c2&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input7_c2&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Input8_c2&quot;</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> Input_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Input_capacity_list </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> Input_capacity_list
        
        </font><font color="#0000aa">Set</font><font color="#000000"> Normalized_Input_list_capacity </font><font color="#660096">map</font><font color="#000000"> [ ? </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"> ]  Input_capacity_list
        
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output1&quot;</font><font color="#000000"> Output_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output2&quot;</font><font color="#000000"> Output_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output3&quot;</font><font color="#000000"> Output_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output4&quot;</font><font color="#000000"> Output_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output5&quot;</font><font color="#000000"> Output_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_list </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">&quot;&quot;</font><font color="#000000"> Output_list
        
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output1_c&quot;</font><font color="#000000"> Output_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output2_c&quot;</font><font color="#000000"> Output_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output3_c&quot;</font><font color="#000000"> Output_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output4_c&quot;</font><font color="#000000"> Output_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;Output5_c&quot;</font><font color="#000000"> Output_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> Output_capacity_list
        </font><font color="#0000aa">set</font><font color="#000000"> Output_capacity_list </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> Output_capacity_list
        
        </font><font color="#0000aa">Set</font><font color="#000000"> Normalized_Output_list_capacity </font><font color="#660096">map</font><font color="#000000"> [ ? </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"> ]  Output_capacity_list </font><font color="#5a5a5a">;;; amount produced for the week</font><font color="#000000">
        
        </font><font color="#0000aa">set</font><font color="#000000"> Incount </font><font color="#660096">length</font><font color="#000000"> Input_list
        </font><font color="#0000aa">set</font><font color="#000000"> Outcount </font><font color="#660096">length</font><font color="#000000"> Output_list
        </font><font color="#0000aa">set</font><font color="#000000"> Industry_type </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;TypeID&quot;</font><font color="#000000"> 
        
        </font><font color="#0000aa">set</font><font color="#000000"> Totalflows </font><font color="#660096">sentence</font><font color="#000000"> (Input_list)(Output_list)
        
        </font><font color="#0000aa">set</font><font color="#000000"> Input_with_qty (</font><font color="#660096">map</font><font color="#000000"> [</font><font color="#660096">list</font><font color="#000000"> ?1 ?2] Input_list Normalized_Input_list_capacity )
        </font><font color="#0000aa">set</font><font color="#000000"> Ouput_with_qty (</font><font color="#660096">map</font><font color="#000000"> [</font><font color="#660096">list</font><font color="#000000"> ?1 ?2] Output_list Normalized_Output_list_capacity)
        
        </font><font color="#0000aa">set</font><font color="#000000"> MMT_Co2 </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;MMT_Co2&quot;</font><font color="#000000">
        </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> 
        [ </font><font color="#0000aa">set</font><font color="#000000"> GHGemissions </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#660096">gis:property-value</font><font color="#000000"> ? </font><font color="#963700">&quot;MMT_Co2&quot;</font><font color="#000000"> GHGemissions ]
        
      ]
    ]
  ]
  
  

  </font><font color="#5a5a5a">;;; setup plants ;;;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> plants
    [  
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (involvment </font><font color="#660096">&gt;</font><font color="#000000"> involvement_threshold_index) 
        [
          </font><font color="#0000aa">set</font><font color="#000000"> plant_type </font><font color="#963700">&quot;pioneer&quot;</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> behaviour </font><font color="#963700">1</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> GHG_partnered MMT_Co2
        ]
        [
          </font><font color="#0000aa">set</font><font color="#000000"> plant_type </font><font color="#963700">&quot;follower&quot;</font><font color="#000000"> 
          </font><font color="#0000aa">set</font><font color="#000000"> behaviour </font><font color="#963700">0</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> GHG_nonpartnered MMT_Co2
        ]
      check-behaviour-now
      
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1.0</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> cultural_cooperation_prob)         </font><font color="#5a5a5a">;; Make plants with a frequency of cooperators determined by Cultural-coopration-prob slider contolled by the user. the higher % of cooperation the higher is likehood to get partnered         </font><font color="#000000">
        [</font><font color="#0000aa">set</font><font color="#000000"> cooperation </font><font color="#963700">TRUE</font><font color="#000000">] 
        [</font><font color="#0000aa">set</font><font color="#000000"> cooperation </font><font color="#963700">FALSE</font><font color="#000000">]  </font><font color="#5a5a5a">;; if a random plant out of 20 is inferior to the initial number of coop probality, set the cooperation true, if not, set coop false    </font><font color="#000000">
    ]
  </font><font color="#0000aa">set</font><font color="#000000"> factories plants

</font><font color="#5a5a5a">;  export-data</font><font color="#000000">

</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GO COMMANDS ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> go
  
  EXCHANGE_MAT
  TRANSPORT
  </font><font color="#0000aa">if</font><font color="#000000"> learn? [learn]</font><font color="#5a5a5a">; </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> plants [ emit_GHG]
  </font><font color="#0000aa">ifelse</font><font color="#000000"> carbon_tax? [carbon_tax] []
  </font><font color="#0000aa">if</font><font color="#000000"> check_influence_policy? [check_influence_carbon-policy]
 </font><font color="#5a5a5a">;log-turtles-tick</font><font color="#000000">
</font><font color="#5a5a5a">; file-print-csv-row</font><font color="#000000">
 </font><font color="#5a5a5a">;export-data</font><font color="#000000">
</font><font color="#5a5a5a">;write_BSpace_output2</font><font color="#000000">
  </font><font color="#0000aa">tick</font><font color="#000000"> 
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&gt;=</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> [</font><font color="#0000aa">stop</font><font color="#000000">]
  
</font><font color="#007f69">end</font><font color="#000000"> 




</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">


</font><font color="#007f69">to</font><font color="#000000"> EXCHANGE_MAT
  </font><font color="#0000aa">ask</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
  [
    </font><font color="#0000aa">if</font><font color="#000000"> check_need </font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [
      find_new_partner
    ]
  ]  
  find-path  </font><font color="#5a5a5a">; for new partnerships</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;                                          find partner                                             ;</font><font color="#000000">



</font><font color="#007f69">to-report</font><font color="#000000"> check_need [plant_a]
  </font><font color="#0000aa">let</font><font color="#000000"> x </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">foreach</font><font color="#000000"> needed_resources_list plant_a
  [
    </font><font color="#0000aa">set</font><font color="#000000"> x (x </font><font color="#660096">+</font><font color="#000000"> ?)
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> x
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> needed_resources_list [plant_a]
  </font><font color="#0000aa">let</font><font color="#000000"> d []
  </font><font color="#0000aa">ask</font><font color="#000000"> plant_a
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a Input_list
    
    </font><font color="#0000aa">let</font><font color="#000000"> b Normalized_Input_list_capacity  </font><font color="#5a5a5a">;; full list of resources (capacity) needed</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> c current-input </font><font color="#660096">self</font><font color="#000000">   </font><font color="#5a5a5a">;; full list of resources (capacity) got from somewhere</font><font color="#000000">
    
    </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]
    [
      </font><font color="#0000aa">set</font><font color="#000000"> d </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> d
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
    
    </font><font color="#0000aa">set</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]
    [
      </font><font color="#0000aa">let</font><font color="#000000"> f </font><font color="#660096">item</font><font color="#000000"> temp b        </font><font color="#5a5a5a">;; one-of resource (capacity) need</font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> g </font><font color="#660096">item</font><font color="#000000"> temp c        </font><font color="#5a5a5a">;; one-of received resources (capacity)</font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> h (f </font><font color="#660096">-</font><font color="#000000"> g)     
      </font><font color="#0000aa">set</font><font color="#000000"> d </font><font color="#660096">replace-item</font><font color="#000000"> temp d h       </font><font color="#5a5a5a">;;  = index list value , replace the 0 with the number of capacity needed</font><font color="#000000">
      
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> d                     </font><font color="#5a5a5a">;; report a full list about how many capacity still need to be found, full list means the length should be same as the input list.</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> needed_name_list [plant_a]
  </font><font color="#0000aa">let</font><font color="#000000"> new_need_list []
  </font><font color="#0000aa">ask</font><font color="#000000"> plant_a
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a Input_list                   </font><font color="#5a5a5a">;; full list</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> b needed_resources_list </font><font color="#660096">self</font><font color="#000000">   </font><font color="#5a5a5a">;; full list</font><font color="#000000">
    
    </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]            </font><font color="#5a5a5a">;; run a while loop with full list (length of full list)</font><font color="#000000">
    [
      </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">item</font><font color="#000000"> temp b </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)
      [
        </font><font color="#0000aa">set</font><font color="#000000"> new_need_list </font><font color="#660096">lput</font><font color="#000000"> (</font><font color="#660096">item</font><font color="#000000"> temp a) new_need_list
      ]
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> new_need_list                 </font><font color="#5a5a5a">;; report a short list that all things in the list are still needed to be exchange</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

  
</font><font color="#007f69">to-report</font><font color="#000000"> left_resource_list [plant_a]
  </font><font color="#0000aa">let</font><font color="#000000"> d []
  </font><font color="#0000aa">ask</font><font color="#000000"> plant_a
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a Output_list                  </font><font color="#5a5a5a">;; full list of output</font><font color="#000000">
    
    </font><font color="#0000aa">let</font><font color="#000000"> b Normalized_Output_list_capacity         </font><font color="#5a5a5a">;; full list of output capacity</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> c current-Output </font><font color="#660096">self</font><font color="#000000">          </font><font color="#5a5a5a">;; full list of resource that were scheduled to be sent out</font><font color="#000000">
    
    </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]
    [
      </font><font color="#0000aa">set</font><font color="#000000"> d </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> d                   </font><font color="#5a5a5a">;; create a full list with the number 0</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
    
    </font><font color="#0000aa">set</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]
    [
      </font><font color="#0000aa">let</font><font color="#000000"> f </font><font color="#660096">item</font><font color="#000000"> temp b                 </font><font color="#5a5a5a">;; could supply</font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> g </font><font color="#660096">item</font><font color="#000000"> temp c                 </font><font color="#5a5a5a">;; supply value that have been sent away</font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> h (f </font><font color="#660096">-</font><font color="#000000"> g)
      </font><font color="#0000aa">set</font><font color="#000000"> d </font><font color="#660096">replace-item</font><font color="#000000"> temp d h       </font><font color="#5a5a5a">;;  = index list value , replace the 0 with the number of resource left</font><font color="#000000">
      
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> d                              </font><font color="#5a5a5a">;; report a full list with the resources left, including 0 if all the resource already have been used</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> left_name_list [plant_a]
  </font><font color="#0000aa">let</font><font color="#000000"> new_left_list []
  </font><font color="#0000aa">ask</font><font color="#000000"> plant_a
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a Output_list                                        </font><font color="#5a5a5a">;; a full list</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> b left_resource_list </font><font color="#660096">self</font><font color="#000000">                            </font><font color="#5a5a5a">;; a full list</font><font color="#000000">
    
    </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]                                  </font><font color="#5a5a5a">;; while loop with full list</font><font color="#000000">
    [
      </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">item</font><font color="#000000"> temp b </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)                                   </font><font color="#5a5a5a">;; check if the output still not finished yet</font><font color="#000000">
      [
        </font><font color="#0000aa">set</font><font color="#000000"> new_left_list </font><font color="#660096">lput</font><font color="#000000"> (</font><font color="#660096">item</font><font color="#000000"> temp a) new_left_list
      ]
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
  ]
  
  </font><font color="#0000aa">report</font><font color="#000000"> new_left_list                                       </font><font color="#5a5a5a">;; report a short list that all things in the list are left (still avaiable for exchange)</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> current-input [plant_b]
  </font><font color="#5a5a5a">; the resources that are already received (scheduled to be received)</font><font color="#000000">
  
  </font><font color="#0000aa">let</font><font color="#000000"> c []
  </font><font color="#0000aa">ask</font><font color="#000000"> plant_b
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a Input_list
    </font><font color="#0000aa">let</font><font color="#000000"> b Input_capacity_list
    
    </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]
    [
      </font><font color="#0000aa">set</font><font color="#000000"> c </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> c
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
    
    </font><font color="#0000aa">foreach</font><font color="#000000"> </font><font color="#660096">sort</font><font color="#000000"> my-in-partnerships
    [
      </font><font color="#0000aa">let</font><font color="#000000"> d [resource_type] </font><font color="#660096">of</font><font color="#000000"> ?
      </font><font color="#0000aa">let</font><font color="#000000"> f [resource_capacity] </font><font color="#660096">of</font><font color="#000000"> ?
      </font><font color="#0000aa">let</font><font color="#000000"> g </font><font color="#660096">position</font><font color="#000000"> d a             </font><font color="#5a5a5a">;; index </font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> h </font><font color="#660096">item</font><font color="#000000"> g c                 </font><font color="#5a5a5a">;; current input capacity</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> h (h </font><font color="#660096">+</font><font color="#000000"> f)
      </font><font color="#0000aa">set</font><font color="#000000"> c </font><font color="#660096">replace-item</font><font color="#000000"> g c h       </font><font color="#5a5a5a">;; g c h = index list value</font><font color="#000000">
    ]
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> c                           </font><font color="#5a5a5a">;; report a full list with how many of each resource have been scheduled to be received.</font><font color="#000000">
 </font><font color="#5a5a5a">; set myresource_capacity resource_capacity</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> current-output [plant_b]
  </font><font color="#5a5a5a">; the resources that are already sent out (scheduled to be sent out)</font><font color="#000000">
  
  </font><font color="#0000aa">let</font><font color="#000000"> c []
  </font><font color="#0000aa">ask</font><font color="#000000"> plant_b
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a Output_list
    </font><font color="#0000aa">let</font><font color="#000000"> b Normalized_Output_list_capacity
    
    </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> a]
    [
      </font><font color="#0000aa">set</font><font color="#000000"> c </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> c
      </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
    
    </font><font color="#0000aa">foreach</font><font color="#000000"> </font><font color="#660096">sort</font><font color="#000000"> my-out-partnerships
    [
      </font><font color="#0000aa">let</font><font color="#000000"> d [resource_type] </font><font color="#660096">of</font><font color="#000000"> ?
      </font><font color="#0000aa">let</font><font color="#000000"> f [resource_capacity] </font><font color="#660096">of</font><font color="#000000"> ?
      </font><font color="#0000aa">let</font><font color="#000000"> g </font><font color="#660096">position</font><font color="#000000"> d a             </font><font color="#5a5a5a">;; index </font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> h </font><font color="#660096">item</font><font color="#000000"> g c                 </font><font color="#5a5a5a">;; current output capacity list</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> h (h </font><font color="#660096">+</font><font color="#000000"> f)
      </font><font color="#0000aa">set</font><font color="#000000"> c </font><font color="#660096">replace-item</font><font color="#000000"> g c h       </font><font color="#5a5a5a">;; g c h = index list value</font><font color="#000000">
    ]
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> c                           </font><font color="#5a5a5a">;; report a full list with how many of each resource have been scheduled to be sent.</font><font color="#000000">
  
  
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> potential_partners [a_plant]
  
  </font><font color="#5a5a5a">;; deal with trust transitive</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> potential_partner []
  
  </font><font color="#0000aa">ask</font><font color="#000000"> a_plant
  [
    </font><font color="#0000aa">ifelse</font><font color="#000000"> ((</font><font color="#660096">count</font><font color="#000000"> my-in-partnerships </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> my-out-partnerships) </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)
    [

      </font><font color="#0000aa">set</font><font color="#000000"> my_current_partner (</font><font color="#660096">turtle-set</font><font color="#000000"> in-partnership-neighbors out-partnership-neighbors)
      </font><font color="#0000aa">let</font><font color="#000000"> in_neighbors    ( [in-partnership-neighbors] </font><font color="#660096">of</font><font color="#000000"> my_current_partner   </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">])
      </font><font color="#0000aa">let</font><font color="#000000"> out_neighbors   ( [out-partnership-neighbors] </font><font color="#660096">of</font><font color="#000000"> my_current_partner  </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">])
      
      </font><font color="#5a5a5a">;set mat_received_from in_neighbors </font><font color="#000000">
     </font><font color="#5a5a5a">; set mat_received_fromName [name] of in_neighbors </font><font color="#000000">
     </font><font color="#5a5a5a">; set mat_sent_to out_neighbors</font><font color="#000000">
    </font><font color="#5a5a5a">;  set mat_sent_toName [name] of out_neighbors </font><font color="#000000">
      
      
      
      </font><font color="#0000aa">set</font><font color="#000000"> out_partners_memory [name] </font><font color="#660096">of</font><font color="#000000"> out-partnership-neighbors
      </font><font color="#0000aa">set</font><font color="#000000"> in_partners_memory [name] </font><font color="#660096">of</font><font color="#000000"> in-partnership-neighbors
      
      </font><font color="#0000aa">let</font><font color="#000000"> pp_check_list1  (</font><font color="#660096">turtle-set</font><font color="#000000"> my_current_partner in_neighbors out_neighbors)
      
      </font><font color="#0000aa">let</font><font color="#000000"> pp_check_list []
      </font><font color="#0000aa">foreach</font><font color="#000000"> </font><font color="#660096">sort</font><font color="#000000"> pp_check_list1
      [
        </font><font color="#0000aa">set</font><font color="#000000"> pp_check_list </font><font color="#660096">lput</font><font color="#000000"> ? pp_check_list
      ]
      </font><font color="#0000aa">set</font><font color="#000000"> pp_check_list   </font><font color="#660096">remove-duplicates</font><font color="#000000"> pp_check_list </font><font color="#5a5a5a">;; potential_partner</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> pp_check_list   </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> pp_check_list </font><font color="#5a5a5a">;; potential_partner</font><font color="#000000">
      
      
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">empty?</font><font color="#000000"> pp_check_list)
      [
        </font><font color="#0000aa">set</font><font color="#000000"> potential_partner (list_out_potential_partner pp_check_list </font><font color="#660096">self</font><font color="#000000">)
        
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">empty?</font><font color="#000000"> potential_partner [</font><font color="#0000aa">show</font><font color="#000000"> </font><font color="#963700">&quot;trust transitive: partner&quot;</font><font color="#000000">]
        
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">empty?</font><font color="#000000"> potential_partner
        [
          </font><font color="#0000aa">let</font><font color="#000000"> all_other_list (</font><font color="#660096">list</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">])
          </font><font color="#0000aa">set</font><font color="#000000"> potential_partner (list_out_potential_partner all_other_list </font><font color="#660096">self</font><font color="#000000">)
          </font><font color="#0000aa">show</font><font color="#000000"> </font><font color="#963700">&quot;trust transitive: i have frd and frd of frd, they don't have what I needed&quot;</font><font color="#000000">
        ]
      ]
      [
        </font><font color="#0000aa">let</font><font color="#000000"> all_other_list (</font><font color="#660096">list</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">])
        </font><font color="#0000aa">set</font><font color="#000000"> potential_partner (list_out_potential_partner all_other_list </font><font color="#660096">self</font><font color="#000000">)
        </font><font color="#0000aa">show</font><font color="#000000"> </font><font color="#963700">&quot;trust transitive: i have no frd yet&quot;</font><font color="#000000">
      ]
    ]
    [
      </font><font color="#0000aa">let</font><font color="#000000"> all_other_list (</font><font color="#660096">list</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">])
      </font><font color="#0000aa">set</font><font color="#000000"> potential_partner (list_out_potential_partner all_other_list </font><font color="#660096">self</font><font color="#000000">)
      </font><font color="#0000aa">show</font><font color="#000000"> </font><font color="#963700">&quot;trust transitive: i have no frd yet&quot;</font><font color="#000000">
    ]
  ]
  
  </font><font color="#0000aa">report</font><font color="#000000"> potential_partner
  </font><font color="#0000aa">set</font><font color="#000000"> my_potential_partners [name] </font><font color="#660096">of</font><font color="#000000"> potential_partner
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to-report</font><font color="#000000"> list_out_potential_partner [a_list plant_need]
  </font><font color="#0000aa">let</font><font color="#000000"> a_list2 </font><font color="#660096">turtle-set</font><font color="#000000"> a_list
  
  </font><font color="#0000aa">let</font><font color="#000000"> pp_list []
  </font><font color="#0000aa">let</font><font color="#000000"> wanted_list needed_name_list plant_need
  
  </font><font color="#0000aa">foreach</font><font color="#000000"> </font><font color="#660096">sort</font><font color="#000000"> a_list2
  [
    </font><font color="#0000aa">let</font><font color="#000000"> i_have_list left_name_list ?
    
    </font><font color="#0000aa">let</font><font color="#000000"> x_list </font><font color="#660096">filter</font><font color="#000000"> [</font><font color="#660096">member?</font><font color="#000000"> ? wanted_list] i_have_list
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">empty?</font><font color="#000000"> x_list
    [
      </font><font color="#0000aa">set</font><font color="#000000"> pp_list </font><font color="#660096">lput</font><font color="#000000"> ? pp_list
    ]
  ] 
  
  </font><font color="#0000aa">report</font><font color="#000000"> pp_list
  </font><font color="#5a5a5a">;;</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> resource_flow [plant_origin plant_destination]
  </font><font color="#0000aa">let</font><font color="#000000"> thing </font><font color="#963700">&quot;&quot;</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> flow  </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> thing_left left_name_list   plant_origin
  </font><font color="#0000aa">let</font><font color="#000000"> thing_need needed_name_list plant_destination
  </font><font color="#0000aa">let</font><font color="#000000"> capacity_left </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> (left_resource_list    plant_origin)
  </font><font color="#0000aa">let</font><font color="#000000"> capacity_need </font><font color="#660096">remove</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> (needed_resources_list plant_destination)
 
  
  </font><font color="#0000aa">let</font><font color="#000000"> thing_in_both_list []
  </font><font color="#0000aa">let</font><font color="#000000"> temp </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">while</font><font color="#000000"> [temp </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> thing_need]
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a (</font><font color="#660096">item</font><font color="#000000"> temp thing_need)
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">member?</font><font color="#000000"> a thing_left
    [
      </font><font color="#0000aa">let</font><font color="#000000"> b </font><font color="#660096">item</font><font color="#000000"> temp capacity_need
      </font><font color="#0000aa">let</font><font color="#000000"> p </font><font color="#660096">position</font><font color="#000000"> a thing_left
      </font><font color="#0000aa">let</font><font color="#000000"> c </font><font color="#660096">item</font><font color="#000000"> p capacity_left
      </font><font color="#0000aa">let</font><font color="#000000"> f </font><font color="#660096">min</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> b c)
      </font><font color="#0000aa">let</font><font color="#000000"> d (</font><font color="#660096">list</font><font color="#000000"> a f)                                </font><font color="#5a5a5a">;;; thing (type), flow</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> thing_in_both_list </font><font color="#660096">lput</font><font color="#000000"> d thing_in_both_list
    ]
    </font><font color="#0000aa">set</font><font color="#000000"> temp temp </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  ]
  
  </font><font color="#0000aa">let</font><font color="#000000"> flow_list []  
  
  </font><font color="#0000aa">foreach</font><font color="#000000"> thing_in_both_list
  [
    </font><font color="#0000aa">let</font><font color="#000000"> x </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ?
    </font><font color="#0000aa">set</font><font color="#000000"> flow_list </font><font color="#660096">lput</font><font color="#000000"> x flow_list
  ]
  
  </font><font color="#0000aa">let</font><font color="#000000"> max_flow_possible </font><font color="#660096">max</font><font color="#000000"> flow_list
  </font><font color="#0000aa">let</font><font color="#000000"> target_thing </font><font color="#660096">position</font><font color="#000000"> max_flow_possible flow_list
  
  </font><font color="#0000aa">let</font><font color="#000000"> z </font><font color="#660096">item</font><font color="#000000"> target_thing thing_in_both_list
  </font><font color="#0000aa">show</font><font color="#000000"> z
  </font><font color="#0000aa">report</font><font color="#000000"> z    </font><font color="#5a5a5a">;;; thing (type), flow</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> find_new_partner
  
  </font><font color="#0000aa">if</font><font color="#000000"> (cooperation)
  [
    </font><font color="#0000aa">let</font><font color="#000000"> pp potential_partners </font><font color="#660096">self</font><font color="#000000">      </font><font color="#5a5a5a">;; a list</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> p2 </font><font color="#660096">turtle-set</font><font color="#000000"> pp                </font><font color="#5a5a5a">;; transform a list into an agentset</font><font color="#000000">
    
    </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> p2 </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) 
      [
        </font><font color="#0000aa">set</font><font color="#000000"> one-partner </font><font color="#660096">one-of</font><font color="#000000"> p2
        
        </font><font color="#0000aa">let</font><font color="#000000"> rf resource_flow one-partner </font><font color="#660096">self</font><font color="#000000">  </font><font color="#5a5a5a">;; origin --&gt; destination</font><font color="#000000">
 
        create-partnership-from one-partner
        [
          </font><font color="#0000aa">if</font><font color="#000000"> hide-part? [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">hidden?</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">]
          </font><font color="#0000aa">set</font><font color="#000000"> new-partner? </font><font color="#963700">true</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> resource_type     </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> rf
          </font><font color="#0000aa">set</font><font color="#000000"> resource_capacity </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> rf
          
          </font><font color="#0000aa">set</font><font color="#000000"> ownerFrom [name] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">end1</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> ownerTo [name] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">end2</font><font color="#000000">
           
          </font><font color="#0000aa">set</font><font color="#000000"> ownerFromTurt </font><font color="#660096">end1</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> ownerToTurt </font><font color="#660096">end2</font><font color="#000000">
         
          </font><font color="#0000aa">set</font><font color="#000000"> Comingto </font><font color="#660096">end2</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> ComningFrom </font><font color="#660096">end1</font><font color="#000000">
        ]            
         </font><font color="#0000aa">set</font><font color="#000000"> my_partner one-partner
         </font><font color="#0000aa">set</font><font color="#000000"> my_partnerName [name] </font><font color="#660096">of</font><font color="#000000"> one-partner
 
         </font><font color="#0000aa">set</font><font color="#000000"> mat_received  </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> rf
         </font><font color="#0000aa">set</font><font color="#000000"> mat_qty_received </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> rf
        
         </font><font color="#0000aa">set</font><font color="#000000"> mat_received_from my_partner
         </font><font color="#0000aa">set</font><font color="#000000"> mat_received_fromName [name] </font><font color="#660096">of</font><font color="#000000"> my_partner
         
         </font><font color="#0000aa">set</font><font color="#000000"> flows_qty </font><font color="#660096">lput</font><font color="#000000"> partnerships flows_qty
        
         </font><font color="#0000aa">ask</font><font color="#000000"> my_partner [ 
          </font><font color="#0000aa">set</font><font color="#000000"> mat_sent </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> rf     
          </font><font color="#0000aa">set</font><font color="#000000"> mat_qty_sent </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> rf
          </font><font color="#0000aa">set</font><font color="#000000"> mat_sent_to Comingto
          </font><font color="#0000aa">set</font><font color="#000000"> mat_sent_toName [name] </font><font color="#660096">of</font><font color="#000000">  Comingto
                       ]
  
  ]
      [
        find_no_partner
      ]
  ]
  
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#007f69">to</font><font color="#000000"> find_no_partner
  
  </font><font color="#0000aa">ask</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
  [
    </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> my-in-partnerships </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> my-out-partnerships) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [
      </font><font color="#0000aa">set</font><font color="#000000"> behaviour </font><font color="#963700">0</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000">
    ]
  ]
  
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;                                           find path                                               ;</font><font color="#000000">



</font><font color="#007f69">to</font><font color="#000000"> find-path
  </font><font color="#0000aa">nw:set-snapshot</font><font color="#000000"> nodes paths
  </font><font color="#0000aa">ask</font><font color="#000000"> partnerships </font><font color="#660096">with</font><font color="#000000"> [new-partner? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">]
  [
    </font><font color="#0000aa">let</font><font color="#000000"> a []
    </font><font color="#0000aa">let</font><font color="#000000"> b []
    
    </font><font color="#0000aa">let</font><font color="#000000"> junction1 [plocation] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">end1</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> junction2 [plocation] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">end2</font><font color="#000000">
    
    </font><font color="#0000aa">let</font><font color="#000000"> d junction2
    </font><font color="#0000aa">ask</font><font color="#000000"> junction1
    [
      
      </font><font color="#0000aa">set</font><font color="#000000"> a   </font><font color="#660096">nw:path-to</font><font color="#000000">            d
      </font><font color="#0000aa">set</font><font color="#000000"> b   </font><font color="#660096">nw:turtles-on-path-to</font><font color="#000000"> d
    ]
  
    </font><font color="#0000aa">set</font><font color="#000000"> route-list      a
    </font><font color="#0000aa">set</font><font color="#000000"> route-node-list b
  ]
  
  
  </font><font color="#0000aa">ask</font><font color="#000000"> partnerships </font><font color="#660096">with</font><font color="#000000"> [new-partner? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">]
  [
    </font><font color="#0000aa">foreach</font><font color="#000000"> route-list
    [</font><font color="#0000aa">ask</font><font color="#000000"> ? [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">yellow</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> dist </font><font color="#660096">link-length</font><font color="#000000">
         ]
    </font><font color="#0000aa">set</font><font color="#000000"> mydistance </font><font color="#660096">sum</font><font color="#000000"> [dist] </font><font color="#660096">of</font><font color="#000000"> paths
    </font><font color="#0000aa">show</font><font color="#000000"> mydistance
    </font><font color="#0000aa">set</font><font color="#000000"> mydistance_km mydistance </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">
    
    ]
        ]
  
  hatch-truck
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;;; Path length computations ;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> hatch-truck
  
  </font><font color="#0000aa">ask</font><font color="#000000"> partnerships </font><font color="#660096">with</font><font color="#000000"> [new-partner? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">]
  [    
    </font><font color="#0000aa">let</font><font color="#000000"> m-list route-node-list
    
    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">end1</font><font color="#000000">
    [
      hatch-trucks </font><font color="#963700">1</font><font color="#000000">
      [
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> (truck-meters </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">4000</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> meters-per-patch
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> move-list  m-list
        
        </font><font color="#0000aa">set</font><font color="#000000"> done? </font><font color="#963700">false</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> move-index </font><font color="#963700">0</font><font color="#000000">
        
        </font><font color="#0000aa">if</font><font color="#000000"> hide-truck? [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">hidden?</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">]
      ]
    ]
    
    </font><font color="#0000aa">set</font><font color="#000000"> new-partner? </font><font color="#963700">false</font><font color="#000000">
  ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> TRANSPORT
  
  moving
  
  </font><font color="#0000aa">if</font><font color="#000000"> go-back? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">
  [ goback_command ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> moving
  </font><font color="#0000aa">while</font><font color="#000000"> [</font><font color="#660096">any?</font><font color="#000000"> trucks </font><font color="#660096">with</font><font color="#000000"> [done? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000">]]
  [
    </font><font color="#0000aa">ask</font><font color="#000000"> trucks </font><font color="#660096">with</font><font color="#000000"> [done? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000">]
    [
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (move-index) </font><font color="#660096">&gt;=</font><font color="#000000"> (</font><font color="#660096">length</font><font color="#000000"> move-list)
      [
        </font><font color="#0000aa">set</font><font color="#000000"> done? </font><font color="#963700">true</font><font color="#000000">
      ]
      [
        move-truck
      ]
    ]
  ]
  
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">all?</font><font color="#000000"> trucks [done? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">]
    [
      </font><font color="#0000aa">ask</font><font color="#000000"> trucks
      [
        </font><font color="#0000aa">set</font><font color="#000000"> move-index </font><font color="#963700">0</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> done? </font><font color="#963700">false</font><font color="#000000">
      ]
      </font><font color="#0000aa">show</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;plant 1 count: &quot;</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">])
      </font><font color="#0000aa">show</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;trucks count: &quot;</font><font color="#660096">count</font><font color="#000000"> trucks)
      </font><font color="#0000aa">show</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;partnerships count: &quot;</font><font color="#660096">count</font><font color="#000000"> partnerships)
    ]
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#007f69">to</font><font color="#000000"> goback_command  
  </font><font color="#0000aa">ask</font><font color="#000000"> trucks
    [
      </font><font color="#0000aa">set</font><font color="#000000"> move-list </font><font color="#660096">reverse</font><font color="#000000"> move-list
    ]
    
  moving  
  </font><font color="#0000aa">ask</font><font color="#000000"> trucks
    [
      </font><font color="#0000aa">set</font><font color="#000000"> move-list </font><font color="#660096">reverse</font><font color="#000000"> move-list
    ]
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to</font><font color="#000000"> move-truck
  </font><font color="#0000aa">let</font><font color="#000000"> x (</font><font color="#660096">item</font><font color="#000000"> move-index move-list)
  </font><font color="#0000aa">face</font><font color="#000000"> x
  </font><font color="#0000aa">fd</font><font color="#000000"> (</font><font color="#660096">distance</font><font color="#000000"> x)
  </font><font color="#0000aa">set</font><font color="#000000"> move-index (move-index </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;                                         behaviour change                                          ;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> learn                                                    </font><font color="#5a5a5a">;;;;;imitate most frequent behavior with turtles in radius 5</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> learn? 
  [
    </font><font color="#0000aa">ask</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
    [
      </font><font color="#0000aa">let</font><font color="#000000"> a </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> plants </font><font color="#660096">in-radius</font><font color="#000000"> influence_radius </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
      </font><font color="#0000aa">let</font><font color="#000000"> b </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> plants </font><font color="#660096">in-radius</font><font color="#000000"> influence_radius </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
      </font><font color="#0000aa">if</font><font color="#000000"> (a </font><font color="#660096">+</font><font color="#000000"> b) </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
      [
        </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">random-float</font><font color="#000000"> ( a </font><font color="#660096">/</font><font color="#000000"> (a </font><font color="#660096">+</font><font color="#000000"> b) )) </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#660096">random-float</font><font color="#000000"> b </font><font color="#660096">/</font><font color="#000000"> (a </font><font color="#660096">+</font><font color="#000000"> b))  </font><font color="#5a5a5a">;; count a &gt; count b</font><font color="#000000">
        [
          </font><font color="#0000aa">set</font><font color="#000000"> behaviour </font><font color="#963700">1</font><font color="#000000">
        ]
      ]
    ]
  ]
  
  check-behaviour-now
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> check-behaviour-now
  
  </font><font color="#0000aa">ask</font><font color="#000000"> plants
  [
    </font><font color="#0000aa">if</font><font color="#000000"> behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000">]
    
    </font><font color="#0000aa">if</font><font color="#000000"> behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000">]
  ]
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;                                          GHG calculation                                          ;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> emit_GHG
  </font><font color="#0000aa">ask</font><font color="#000000"> plants [
    </font><font color="#0000aa">set</font><font color="#000000"> GHG_partnered MMT_Co2 </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">1.01</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> GHG_nonpartnered MMT_Co2 </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">1.8</font><font color="#000000">
  ]
    
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#007f69">to</font><font color="#000000"> carbon_tax </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;the contribution of C02 in GHG is considered to be 99%. water vapor is ignored. therefore GHG=Co2 </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> plants [
    </font><font color="#0000aa">set</font><font color="#000000"> behaviour0_tax GHG_partnered </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; amount of carbon tax non-partnered plants have to pay</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> behaviour1_tax GHG_nonpartnered </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; amount of carbon tax partnered plants have to pay</font><font color="#000000">
    </font><font color="#0000aa">ifelse</font><font color="#000000"> (behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) 
    [</font><font color="#0000aa">set</font><font color="#000000"> behaviour0_tax (behaviour0_tax </font><font color="#660096">*</font><font color="#000000"> carbon_tax_price)] 
    [</font><font color="#0000aa">set</font><font color="#000000"> behaviour1_tax (behaviour1_tax </font><font color="#660096">*</font><font color="#000000"> carbon_tax_price)]
  ]
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to</font><font color="#000000"> check_influence_carbon-policy           </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;plants managers can also change their behaviour from non-partnered to partnered through the incentive (influence) </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> plants [                           </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;; of the carbon tax. if the plant is non-partnerd and has a majority of neighboring plants that are partnered and</font><font color="#000000">
                                         </font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;; pay a certain percentage less (influence_threshold) tax, then imitate their behaviour and become partnered.</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour1_tax </font><font color="#660096">=</font><font color="#000000"> [behaviour1_tax </font><font color="#660096">*</font><font color="#000000"> Influence_threshold] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">] </font><font color="#660096">in-radius</font><font color="#000000"> influence_radius </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> factories </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
      [</font><font color="#0000aa">set</font><font color="#000000"> behaviour </font><font color="#963700">1</font><font color="#000000">]
  ]
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">;;;;;;;;;;;REPORTERS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> clear-all-but-globals </font><font color="#0000aa">ct</font><font color="#000000"> </font><font color="#0000aa">cp</font><font color="#000000"> </font><font color="#0000aa">cd</font><font color="#000000"> </font><font color="#0000aa">clear-links</font><font color="#000000"> </font><font color="#0000aa">clear-all-plots</font><font color="#000000"> </font><font color="#0000aa">clear-output</font><font color="#000000"> </font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> meters-per-patch </font><font color="#5a5a5a">;; maybe should be in gis: extension?</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> world </font><font color="#660096">gis:world-envelope</font><font color="#000000"> </font><font color="#5a5a5a">; [ minimum-x maximum-x minimum-y maximum-y ]</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> x-meters-per-patch (</font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> world </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> world) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">min-pxcor</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2.59</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> y-meters-per-patch (</font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> world </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> world) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2.59</font><font color="#000000">
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> </font><font color="#660096">list</font><font color="#000000"> x-meters-per-patch y-meters-per-patch
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> new-node-at [x y] </font><font color="#5a5a5a">; returns a node at x,y creating one if there isn't one there.</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> n nodes </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> x </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> y]
  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> n 
  [</font><font color="#0000aa">set</font><font color="#000000"> n </font><font color="#660096">one-of</font><font color="#000000"> n] 
  [
    create-nodes </font><font color="#963700">1</font><font color="#000000"> 
    [
      </font><font color="#0000aa">setxy</font><font color="#000000"> x y 
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0.01</font><font color="#000000"> 
      </font><font color="#0000aa">set</font><font color="#000000"> n </font><font color="#660096">self</font><font color="#000000">]
  ]
  </font><font color="#0000aa">report</font><font color="#000000"> n
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> total_Partnered
 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> total_NonPartnered
 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#007f69">to-report</font><font color="#000000"> total_qty_receiced
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [mat_qty_received] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to-report</font><font color="#000000"> total_qty_sent
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [mat_qty_sent] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000"> 


</font><font color="#007f69">to-report</font><font color="#000000"> total_qty
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> (total_qty_receiced </font><font color="#660096">+</font><font color="#000000"> total_qty_sent) </font><font color="#963700">0</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000"> 
  
</font><font color="#007f69">to-report</font><font color="#000000"> Mean_trust
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [trust] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> Mean_doubt
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [doubt] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> Mean_Involvment
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [involvment] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to-report</font><font color="#000000"> GHG_savings
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [Total_GHG_nonpartnered </font><font color="#660096">-</font><font color="#000000"> Total_GHG_partnered] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to-report</font><font color="#000000"> Tax_savings
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [behaviour0_tax </font><font color="#660096">-</font><font color="#000000"> behaviour1_tax] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to-report</font><font color="#000000"> Total_behaviour1_tax
 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [behaviour1_tax] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to-report</font><font color="#000000"> Total_behaviour0_tax
</font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [behaviour0_tax] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to-report</font><font color="#000000"> Mean_behaviour1_tax
</font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [behaviour1_tax] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to-report</font><font color="#000000"> Mean_behaviour0_tax
</font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [behaviour0_tax] </font><font color="#660096">of</font><font color="#000000"> plants
</font><font color="#007f69">end</font><font color="#000000"> 



</font><font color="#007f69">to-report</font><font color="#000000"> co2_transport
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> (co2_pertonne_mile </font><font color="#660096">+</font><font color="#000000"> (total_qty </font><font color="#660096">*</font><font color="#000000"> co2_pertonne_mile </font><font color="#660096">*</font><font color="#000000"> mydistance_km)) </font><font color="#963700">0</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> Co2_transportOutside
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> (co2_pertonne_mile </font><font color="#660096">+</font><font color="#000000"> (total_qty  </font><font color="#660096">*</font><font color="#000000"> co2_pertonne_mile </font><font color="#660096">*</font><font color="#000000"> (mydistance_km </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">))) </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> Co2_Trans_savings
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> (Co2_transportOutside </font><font color="#660096">-</font><font color="#000000"> co2_transport) </font><font color="#963700">0</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> Total_GHG_partnered
 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [GHG_partnered] </font><font color="#660096">of</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to-report</font><font color="#000000"> Total_GHG_nonpartnered
</font><font color="#0000aa">report</font><font color="#000000">  </font><font color="#660096">sum</font><font color="#000000"> [GHG_nonpartnered] </font><font color="#660096">of</font><font color="#000000"> plants </font><font color="#660096">with</font><font color="#000000"> [behaviour </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]
</font><font color="#007f69">end</font><font color="#000000"> 


</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;==============================================================================================;;;</font><font color="#000000">
</font><font color="#5a5a5a">;                                         Turtles log for individual analysis with output file                                      ;</font><font color="#000000">





</font><font color="#5a5a5a">;;;####################################</font>
</pre>

</body>
</html>
